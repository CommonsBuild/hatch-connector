# Do not edit subgraph.yaml, this is a generated file.
# Instead, edit subgraph.template.yaml and run `yarn manifest-<network>-[staging]`
specVersion: 0.0.2
description: Subgraph made by Commons Swarm for the hatch contracts.
repository: https://github.com/TECommons/hatch-connector
schema:
  file: ./schema.graphql
dataSources:
# Organizations
  # Kernel
  - kind: ethereum/contract
    name: hatch-template dao
    network: xdai
    source:
      abi: Kernel
      address: '0xb12aA06F3D18E5b2402EF6a674d744A125374F73'
      startBlock: 15209452
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: Token
          file: ./abis/Token.json
        - name: Hatch
          file: ./abis/Hatch.json
        - name: HatchOracle
          file: ./abis/HatchOracle.json
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: NewAppProxy(address,bool,bytes32)
          handler: handleNewAppProxy
      file: ./src/aragon/mappings/Kernel.ts
  # Kernel
  - kind: ethereum/contract
    name: hatch-template dao 2
    network: xdai
    source:
      abi: Kernel
      address: '0xD3F3D84A3Da7E32eB8D17d695C87c9eF03F08495'
      startBlock: 15213023
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: Token
          file: ./abis/Token.json
        - name: Hatch
          file: ./abis/Hatch.json
        - name: HatchOracle
          file: ./abis/HatchOracle.json
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: NewAppProxy(address,bool,bytes32)
          handler: handleNewAppProxy
      file: ./src/aragon/mappings/Kernel.ts
  # Kernel
  - kind: ethereum/contract
    name: hatch with xdai params (04&#x2F;01)
    network: xdai
    source:
      abi: Kernel
      address: '0x610f47Ece09Da2367f295950E5E4Aea581Bc7A23'
      startBlock: 15319590
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: Token
          file: ./abis/Token.json
        - name: Hatch
          file: ./abis/Hatch.json
        - name: HatchOracle
          file: ./abis/HatchOracle.json
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: NewAppProxy(address,bool,bytes32)
          handler: handleNewAppProxy
      file: ./src/aragon/mappings/Kernel.ts
  # Kernel
  - kind: ethereum/contract
    name: hatch with localhost params (04&#x2F;01)
    network: xdai
    source:
      abi: Kernel
      address: '0x9c32aA3984E479E1b9702BdB2d8951Afb36254E5'
      startBlock: 15319380
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: Token
          file: ./abis/Token.json
        - name: Hatch
          file: ./abis/Hatch.json
        - name: HatchOracle
          file: ./abis/HatchOracle.json
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: NewAppProxy(address,bool,bytes32)
          handler: handleNewAppProxy
      file: ./src/aragon/mappings/Kernel.ts
  # Kernel
  - kind: ethereum/contract
    name: hatch with xdai params 1 day hatch period (04&#x2F;01)
    network: xdai
    source:
      abi: Kernel
      address: '0x74472ddd12F051a35C8a91A594C865e2fF3588B8'
      startBlock: 15319651
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: Token
          file: ./abis/Token.json
        - name: Hatch
          file: ./abis/Hatch.json
        - name: HatchOracle
          file: ./abis/HatchOracle.json
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: NewAppProxy(address,bool,bytes32)
          handler: handleNewAppProxy
      file: ./src/aragon/mappings/Kernel.ts
  # Kernel
  - kind: ethereum/contract
    name: hatch to test redemption (04&#x2F;20)
    network: xdai
    source:
      abi: Kernel
      address: '0x759Bacd4eC25AA520AC61b19e5e21E4a0E5df6b3'
      startBlock: 15627525
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: Token
          file: ./abis/Token.json
        - name: Hatch
          file: ./abis/Hatch.json
        - name: HatchOracle
          file: ./abis/HatchOracle.json
        - name: DAOFactory
          file: ./abis/DAOFactory.json
        - name: DAOKit
          file: ./abis/DAOKit.json
        - name: DAOTemplate
          file: ./abis/DAOTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: MiniMeToken
          file: ./abis/MiniMeToken.json
        - name: MiniMeTokenFactory
          file: ./abis/MiniMeTokenFactory.json
      eventHandlers:
        - event: NewAppProxy(address,bool,bytes32)
          handler: handleNewAppProxy
      file: ./src/aragon/mappings/Kernel.ts
# /Organizations
# Organization factories
# /Organization factories
# Organization templates
# /Organization templates
# Legacy organization templates
# /Legacy organization templates
# Token factories
# /Token factories
# Tokens
# /Tokens
templates:
# Kernel
- kind: ethereum/contract
  name: Kernel
  network: xdai
  source:
    abi: Kernel
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.4
    language: wasm/assemblyscript
    entities:
      - NoEnt
    abis:
      - name: Token
        file: ./abis/Token.json
      - name: Hatch
        file: ./abis/Hatch.json
      - name: HatchOracle
        file: ./abis/HatchOracle.json
      - name: DAOFactory
        file: ./abis/DAOFactory.json
      - name: DAOKit
        file: ./abis/DAOKit.json
      - name: DAOTemplate
        file: ./abis/DAOTemplate.json
      - name: Kernel
        file: ./abis/Kernel.json
      - name: MiniMeToken
        file: ./abis/MiniMeToken.json
      - name: MiniMeTokenFactory
        file: ./abis/MiniMeTokenFactory.json
    eventHandlers:
      - event: NewAppProxy(address,bool,bytes32)
        handler: handleNewAppProxy
    file: ./src/aragon/mappings/Kernel.ts
# MiniMeToken
- kind: ethereum/contract
  name: MiniMeToken
  network: xdai
  source:
    abi: MiniMeToken
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.4
    language: wasm/assemblyscript
    entities:
      - NoEnt
    abis:
      - name: DAOFactory
        file: ./abis/DAOFactory.json
      - name: DAOKit
        file: ./abis/DAOKit.json
      - name: DAOTemplate
        file: ./abis/DAOTemplate.json
      - name: Kernel
        file: ./abis/Kernel.json
      - name: MiniMeToken
        file: ./abis/MiniMeToken.json
      - name: MiniMeTokenFactory
        file: ./abis/MiniMeTokenFactory.json
    eventHandlers:
      - event: ClaimedTokens(indexed address,indexed address,uint256)
        handler: handleClaimedTokens
      - event: Transfer(indexed address,indexed address,uint256)
        handler: handleTransfer
      - event: NewCloneToken(indexed address,uint256)
        handler: handleNewCloneToken
      - event: Approval(indexed address,indexed address,uint256)
        handler: handleApproval
    file: ./src/aragon/mappings/MiniMeToken.ts

# Hatch
- kind: ethereum/contract
  name: Hatch
  network: xdai
  source:
    abi: Hatch
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.4
    language: wasm/assemblyscript
    entities:
      - Config
      - Contribution
      - Token
    abis:
      - name: Hatch
        file: ./abis/Hatch.json
      - name: Token
        file: ./abis/Token.json
    eventHandlers:
      - event: SetOpenDate(uint64)
        handler: handleSetOpenDate
      - event: Close()
        handler: handleClose
      - event: Contribute(indexed address,uint256,uint256,uint256)
        handler: handleContribute
      - event: Refund(indexed address,uint256,uint256,uint256)
        handler: handleRefund
    file: ./src/Hatch.ts
# HatchOracle
- kind: ethereum/contract
  name: HatchOracle
  network: xdai
  source:
    abi: HatchOracle
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.4
    language: wasm/assemblyscript
    entities:
      - HatchOracleConfig
      - Token
    abis:
      - name: HatchOracle
        file: ./abis/HatchOracle.json
      - name: Token
        file: ./abis/Token.json
    eventHandlers:
      - event: ScoreTokenSet(address)
        handler: handleScoreTokenSet
      - event: RatioSet(uint256)
        handler: handleRatioSet
    file: ./src/HatchOracle.ts
